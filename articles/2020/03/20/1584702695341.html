<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>Docker ä¸­è¿è¡Œ OpenWrt - Frelon-Lee (â—'â—¡'â—) Blog</title><meta name="description" content="Docker ä¸­è¿è¡Œ OpenWrt"/><meta property="og:description" content="Docker ä¸­è¿è¡Œ OpenWrt"/>    <meta name="keywords" content="Solo,frelon,jokeme"/><link rel="dns-prefetch" href="https://jokefrelon.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://jokefrelon.github.io"><link rel="icon" type="image/png" href="/images/bk.png"/><link rel="apple-touch-icon" href="/images/bk.png"><link rel="shortcut icon" type="image/x-icon" href="/images/bk.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="Docker ä¸­è¿è¡Œ OpenWrt - Frelon-Lee (â—'â—¡'â—) Blog"/><meta property="og:site_name" content="Frelon-Lee (â—&#39;â—¡&#39;â—) Blog"/><meta property="og:url"      content="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html?"/><meta property="og:image" content="/images/bk.png"/><link rel="search" type="application/opensearchdescription+xml" title="Docker ä¸­è¿è¡Œ OpenWrt - Frelon-Lee (â—'â—¡'â—) Blog" href="/opensearch.xml"><link href="https://jokefrelon.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://jokefrelon.github.io/manifest.json">        <link rel="canonical" href="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html">        <link rel="stylesheet"
              href="https://jokefrelon.github.io/skins/nijigen/css/base.css?1593550019882"/>
            <link rel="prev" title="Bay Trailä¸»æ¿å®‰è£…Linuxçš„å‘" href="https://jokefrelon.github.io/articles/2020/03/16/1584344826236.html">
            <link rel="next" title="ä¸€è¾ˆå­éƒ½ä¸æƒ³å®‰è£…ç³»ç»Ÿäº†!" href="https://jokefrelon.github.io/articles/2020/03/31/1585624128468.html">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/fz6m/Private-web@1.2/js/sakura/sakura-original.js"></script>
<meta name="baidu-site-verification" content="sC1e5r8uUo" /></head>
<body>
<div class="bg"></div>
<div class="bg bg--1"></div>
<div class="bg bg--2"></div>
<div class="bg bg--3"></div>
<div class="bg bg--4"></div>
<div class="bg bg--5"></div>
<header class="header">
    <div class="header__wrap">
        <a href="https://jokefrelon.github.io" rel="start" class="header__logo">
            <i class="icon__home"></i> Frelon-Lee (â—'â—¡'â—) Blog
        </a>

        <nav class="mobile__hidden header__nav">
                <a href="/my-github-repos" target="_self" rel="section">
                    <img class="page-icon" src="/images/github-icon.png">æˆ‘çš„å¼€æº
                </a>
                <a href="https://jokefrelon.github.io/dynamic.html" rel="section">
                    <i class="icon__refresh"></i> åŠ¨æ€
                </a>
            <a href="https://jokefrelon.github.io/tags.html" rel="section">
                <i class="icon__tags"></i> æ ‡ç­¾å¢™
            </a>
            <a href="https://jokefrelon.github.io/archives.html">
                <i class="icon__inbox"></i> å­˜æ¡£
            </a>
            <a rel="archive" href="https://jokefrelon.github.io/links.html">
                <i class="icon__link"></i> å‹æƒ…é“¾æ¥
            </a>
            <a rel="alternate" href="https://jokefrelon.github.io/rss.xml" rel="section">
                <i class="icon__rss"></i> RSS
            </a>
        </nav>

    </div>
</header>
<div class="header__m fn__none">
    <i class="icon__list fn__none" onclick="$(this).next().slideToggle()"></i>
    <main class="module__list fn__none"></main>
    <i class="icon__more" onclick="$(this).next().slideToggle()"></i>
    <main class="module__list">
        <ul>
                <li>
                    <a href="/my-github-repos" target="_self" rel="section">
                        <img class="page-icon" src="/images/github-icon.png">æˆ‘çš„å¼€æº
                    </a>
                </li>
                <li>
                    <a href="https://jokefrelon.github.io/dynamic.html" rel="section">
                        <i class="icon__refresh"></i> åŠ¨æ€
                    </a>
                </li>
            <li>
                <a href="https://jokefrelon.github.io/tags.html" rel="section">
                    <i class="icon__tags"></i> æ ‡ç­¾å¢™
                </a>
            </li>
            <li>
                <a href="https://jokefrelon.github.io/archives.html">
                    <i class="icon__inbox"></i> å­˜æ¡£
                </a>
            </li>
            <li>
                <a rel="archive" href="https://jokefrelon.github.io/links.html">
                    <i class="icon__link"></i> å‹æƒ…é“¾æ¥
                </a>
            </li>
            <li>
                <a rel="alternate" href="https://jokefrelon.github.io/rss.xml" rel="section">
                    <i class="icon__rss"></i> RSS
                </a>
            </li>
        </ul>
    </main>
</div><div class="main" id="pjax">
    
    <div class="content">
        <main id="articlePage">
            <div class="article-list">
                <div class="item item--active">
                    <time class="vditor-tooltipped vditor-tooltipped__n item__date"
                          aria-label="2020å¹´">
                    05æœˆ
                        <span class="item__day">06</span>
                    </time>

                    <h2 class="item__title">
                        <a rel="bookmark" href="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html">
                        Docker ä¸­è¿è¡Œ OpenWrt
                        </a>
                    </h2>

                    <div class="item__date--m fn__none">
                        <i class="icon__date"></i>
                    2020-05-06
                    </div>

                    <div class="ft__center">
                        <span class="tag">
                            <i class="icon__tags"></i>
                            <a rel="tag" href="https://jokefrelon.github.io/tags/Docker">
                                Docker</a>,
                            <a rel="tag" href="https://jokefrelon.github.io/tags/Linux">
                                Linux</a>,
                            <a rel="tag" href="https://jokefrelon.github.io/tags/OpenWrt">
                                OpenWrt</a>
                        </span>
                        <a class="tag" href="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html#comments">
                            <i class="icon__comments"></i> 0 è¯„è®º
                        </a>
                        <span class="tag">
                            <i class="icon__views"></i>
                        <span data-uvstaturl="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html">0</span> æµè§ˆ
                        </span>
                    </div>

                    <div class="vditor-reset">
                    <p></p><h1 id="b3_solo_h1_0">Docker  ä¸­è¿è¡Œ  OpenWrt</h1>
<p>å‰å‡ å¤©è§£å†³äº†å°ä¸»æœº <strong>Ubuntu</strong> ç³»ç»Ÿçš„å¼•å¯¼é—®é¢˜ä»¥åã€‚ä¾¿å¼€å§‹æŠ˜è…¾ <strong>OpenWrt</strong> äº†ï¼Œåœ¨ <strong>GitHub</strong> ä¸Šæ‰¾åˆ°äº† <strong>L å¤§</strong> çš„ <strong><a href="https://github.com/coolsnowwolf/lede" target="_blank">Lede</a></strong> æºç ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ã€‚</p>
<p>å…³äºå¦‚ä½•ç¼–è¯‘æˆ‘ä¹Ÿä¸è¯´äº†ï¼Œ<strong>L å¤§</strong> åœ¨ Readme é‡Œé¢è¯´çš„æ¸…æ¸…æ¥šæ¥šçš„ï¼Œæ²¡æœ‰éš¾åº¦ï¼Œå°±æ˜¯éœ€è¦æœ‰è€å¿ƒå’Œè‰¯å¥½çš„ç½‘ç»œç¯å¢ƒï¼Œç¼–è¯‘è¿‡ç¨‹ä¼šå¾ˆæ…¢(å»ºè®®æ‰¶æ¢¯å­ï¼Œæˆ‘æ²¡æœ‰ç”¨æ¢¯å­ï¼Œæ•´æ•´ç¼–è¯‘äº†ä¸¤å¤©æ‰å®Œæˆï¼ğŸ¤£ ğŸ¤£ ğŸ¤£) ä¹Ÿå¯ä»¥ç”¨æˆ‘ç¼–è¯‘å¥½çš„ <strong><a href="https://github.com/jokefrelon/linux-series/releases" target="_blank">x86_64</a></strong> çš„å›ºä»¶(é›†æˆæœ‰<strong>ssr,v2ray,adblock plus,samba,vsftpd</strong>ç­‰å¸¸ç”¨æ’ä»¶)</p>
<p>å¯¹äºç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶æˆ‘æ¥ä»‹ç´¹ä¸€ä¸‹ï¼š</p>
<table>
<thead>
<tr><th align="center"><strong>openwrt-x86-64-rootfs-squashfs.img</strong></th><th align="center">OpenWrt for Docker ã® img</th></tr>
</thead>
<tbody>
<tr><td align="center"><strong>openwrt-x86-64-combined-squashfs.vmdk</strong></td><td align="center"><strong>è™šæ‹Ÿæœºæ–‡ä»¶ï¼Œä¸¢è¿› VMware é‡Œé¢ä½¿ç”¨</strong></td></tr>
<tr><td align="center"><strong>openwrt-x86-64-combined-squashfs.img</strong></td><td align="center"><strong>æˆ‘ä»¬ç¼–è¯‘çš„å›ºä»¶ï¼Œåˆ»å½•åˆ° u ç›˜ä¸Šæ¥å®‰è£…</strong></td></tr>
</tbody>
</table>
<p>æˆ‘ä¸€å¼€å§‹ä¹Ÿä¸çŸ¥é“è¿™äº›é•œåƒåº”è¯¥é€‰å“ªä¸€ä¸ªåˆ»å½•ï¼Œç„¶åçˆ¬å„ç§è®ºå›ç»ˆäºè¢«æˆ‘å‘ç°äº†è¿™å‡ ä¸ªæ–‡ä»¶çš„ç”¨æ³•äº†</p>
<p>å¥½ï¼ç¯å¢ƒå·²ç»æ²¡æœ‰é—®é¢˜ï¼Œå®‰è£…åŒ…ä¹Ÿæœ‰äº†ï¼Œé‚£å°±å…ˆåœ¨ <strong>Docker</strong> é‡Œé¢è¯•è¯•çœ‹è¿™ä¸ª <strong>OpenWrt</strong> æ€ä¹ˆæ ·å§</p>
<h2 id="b3_solo_h2_1">1 å¯¼å…¥ OpenWrt çš„é•œåƒ</h2>
<pre><code>cd ~/lede/bin/targets/x86/64
mkdir -p ~/opt
mount -o loop openwrt-x86-64-rootfs-squashfs.img ~/opt
tar -cvzf ~/Openwrt.tar.gz ~/opt/* 
docker import ~/OpenWrt.tar.gz OpenWrt
</code></pre>
<h2 id="b3_solo_h2_2">2 Docker åˆ›å»ºç½‘ç»œ</h2>
<pre><code>docker network create -d macvlan --subnet=192.168.100.0/24 --gateway=192.168.100.1 -o parent=enp2s0 fet
</code></pre>
<p>è¿™ä¸ª IP åœ°å€éœ€è¦æ ¹æ®ä½ çš„å®é™… IP æ›´æ”¹ï¼Œç½‘å¡ä¹Ÿä¸€æ ·ï¼Œä¸èƒ½ç…§æŠ„</p>
<h2 id="b3_solo_h2_3">3 Docker è¿è¡Œå®¹å™¨</h2>
<pre><code>docker run -d --name lede --network fet --privileged OpeenWrt /sbin/init
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä¸€å¼€å§‹å‚è€ƒ <strong><a href="https://openwrt.org/zh/docs/guide-user/virtualization/docker_openwrt_image" target="_blank">OpenWrt å®˜æ–¹æ–‡æ¡£</a></strong>,ç»“æœä¸€ç›´æŠ¥é”™ï¼Œæˆ‘ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ä»–ç»™çš„ä¾‹å­ ğŸŒ°é‡Œé¢ç³»ç»Ÿå¤ªè€ï¼Œæˆ‘å°±æ¢æˆ 19.10,ä¾æ—§æŠ¥é”™ï¼Œç„¶ååœ¨ç½‘ä¸Šçè½¬æ‚ çš„æ—¶å€™çœ‹åˆ°äº†ä¸€ç¯‡æ¥è‡ª <a href="https://mlapp.cn/376.html" target="_blank"><strong>ç¾ä¸½åº”ç”¨</strong></a> çš„æ–‡ç« ï¼Œè™½ç„¶ï¼Œä»–æ˜¯åœ¨ <strong>æ ‘è“æ´¾</strong> å½“ä¸­å®‰è£… <strong>OpenWrt</strong> ä½†æ˜¯è¿‡ç¨‹å¤§å¤šä¸€æ · (æ„Ÿè°¢ <strong>ç¾ä¸½åº”ç”¨</strong> ğŸ“Œ)</p>
<p>åˆ°è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥</p>
<pre><code>docker ps
[sudo] frelon çš„å¯†ç ï¼š
CONTAINER ID	IMAGE		COMMAND		CREATED		STATUS		PORTS		NAMES
4fe146d86277	OpenWrt		"/sbin/init" 2 hours ago  Up 2 hours			  lede
</code></pre>
<p>çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å®¹å™¨æ˜¯å¦åœ¨æ­£å¸¸è¿è¡Œï¼Œå¦‚æœè¿˜åœ¨è¿è¡Œï¼Œé‚£å°±è¯´æ˜å®¹å™¨æ²¡æœ‰é—®é¢˜å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥äº†</p>
<h2 id="b3_solo_h2_4">4 è¿›å…¥ OpenWrt å®¹å™¨å†…ï¼Œè¿›ä¸€æ­¥é…ç½®</h2>
<pre><code>docker exec -it lede /bin/ash
</code></pre>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ <strong>/bin/ash</strong> è€Œä¸æ˜¯ <strong>/bin/bash</strong></p>
<h3 id="b3_solo_h3_5">4.1 é…ç½®ç½‘ç»œ</h3>
<h4 id="b3_solo_h4_6">4.1.1 æŸ¥çœ‹ä¸€ä¸‹ <strong>IP</strong></h4>
<pre><code>/ # ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
25: eth0@if2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noqueue state DOWN group default
    link/ether 02:42:c0:a8:64:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0
</code></pre>
<p>ç¨ç­‰ç‰‡åˆ»</p>
<pre><code>/ # ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
4: br-lan: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 02:42:c0:a8:64:02 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.1/24 brd 192.168.1.255 scope global br-lan
       valid_lft forever preferred_lft forever
25: eth0@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-lan state UP group default                                                                  link/ether 02:42:c0:a8:64:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0

</code></pre>
<h4 id="b3_solo_h4_7">4.1.2 ç®€æ˜“ä¿®æ”¹é˜²ç«å¢™è§„åˆ™</h4>
<pre><code>opkg update
opkg install nano
nano /etc/config/firewall
</code></pre>
<p>æ‰¾åˆ° <strong>config zone</strong> é‡ç‚¹æ˜¯æŠŠ <strong>option input/output/forward</strong> ã® <strong>REJRECT</strong> æ”¹ä¸º <strong>ACCEPT</strong></p>
<pre><code>config zone
        opion name 'wan'
        list network 'wan'
        list network 'wan6'
        option input 'ACCEPT'
        option output 'ACCEPT'
        option forward 'ACCEPT'
        option masq '1'
        option mtu_fix '1'
</code></pre>
<p>ç„¶åé‡å¯ä¸€ä¸‹</p>
<pre><code>/etc/init.d/firewall restart
</code></pre>
<p>æ­£å¸¸æƒ…å†µä¼šæŠ¥ä¸€å †é”™ï¼Œæ— è§†å³å¯</p>
<h4 id="b3_solo_h4_8">4.1.3 ä¿®æ”¹ç½‘å£</h4>
<pre><code>nano /etc/config/network
</code></pre>
<p>å¯ä»¥çœ‹åˆ° <strong>interface lan</strong> ä½¿ç”¨çš„æ˜¯ <strong>eth0</strong></p>
<p>ç„¶ååˆæ·»åŠ äº†ä¸€ä¸ªç½‘ç»œè¿›è¯¥å®¹å™¨ï¼Œå¹¶åˆ†é…ç»™ <strong>interface wan</strong> å……å½“ <strong>eth1</strong></p>
<pre><code>config interface 'lan'
        option type 'bridge'
        option ifname 'eth0'
        option proto 'static'
        option ipaddr '192.168.1.1'
        option netmask '255.255.255.0'
        option ip6assign '60'
        option gateway '192.168.100.105'

config interface 'wan'
        option ifname 'eth1'
        option proto 'dhcp'
</code></pre>
<p>çœ‹ç€ä¿®æ”¹å°±å¯ä»¥äº†</p>
<pre><code>/etc/init.d/network restart
</code></pre>
<h3 id="b3_solo_h3_9">4.2 ç½‘é¡µç™»å½•</h3>
<p>æŸ¥çœ‹å®¹å™¨åˆ†é…çš„ ip,åœ¨ç½‘é¡µä¸­æ‰“å¼€ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ˜¯å¯ä»¥æ‰“å¼€çš„ï¼Œ</p>
<p>è¾“å…¥é»˜è®¤å¯†ç  ğŸ”‘<strong>password</strong>  å°±å¯ä»¥çœ‹åˆ° <strong>OpenWrt</strong> ã® çŠ¶æ€ä¿¡æ¯</p>
<h3 id="b3_solo_h3_10">4.3 å†æ·»åŠ ä¸€ä¸ªç½‘å£åˆ° OpenWrt å®¹å™¨</h3>
<pre><code>docker network connect bridge OpenWrt
docker exec -it OpenWrt /etc/init.d/network restart
</code></pre>
<p>ç”±äºå‰é¢å·²ç»æŠŠ <strong>eth1</strong> å†™å…¥åˆ°é…ç½®ä¿¡æ¯é‡Œé¢ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€è¦é‡å¯ä¸€ä¸‹ç½‘ç»œå³å¯ï¼Œè‡³æ­¤ <strong>OpenWrt</strong> ã®åŸºæœ¬é…ç½®å·²ç»å®Œæˆ</p>
<p>å¦‚æœéœ€è¦é…ç½® <strong>OpenWrt</strong> æ—è·¯ç½‘å…³ï¼Œå»ºè®®å‚è€ƒä¸Šæ–‡æåˆ°çš„ <a href="https://mlapp.cn/376.html" target="_blank">ç¾ä¸½åº”ç”¨</a></p>
<h3 id="b3_solo_h3_11">ps:è¡¥å……ä¸€ä¸‹</h3>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘å‘ç°ï¼Œç»å¸¸ <strong>opkg update</strong> å¤±è´¥ ä½†æ˜¯ç½‘ç»œå´æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œç½‘å…³ä¹Ÿå¯ä»¥  <strong>ping</strong> é€šï¼Œç„¶åå°±å‘ç°äº† <strong>OpenWrt for Docker</strong> çš„ä¸€ä¸ªå° Bug</p>
<p>æ¯ä¸€æ¬¡é‡å¯(æœ‰æ—¶å€™é€€å‡ºå®¹å™¨)å°±ä¼šé‡ç½® <strong>/etc/resolv.conf</strong> ,è€Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬çš„ DNS æ–‡ä»¶ï¼æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨åŸŸå ã®æ—¶å€™å°±ä¼šå‡ºç°å¤±è´¥</p>
<p>æˆ‘ä¹Ÿè¯•è¿‡åœ¨  <strong>/etc/config/network</strong> é‡Œé¢è®¾ç½®  <strong>DNS</strong>,ä¹ŸåŒæ ·ä¼šè¢«é‡ç½®ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Œåªèƒ½åœ¨æ¯æ¬¡é‡å¯ä»¥åå†™ä¸ªè„šæœ¬ï¼Œè®¾ç½®ä¸€ä¸‹<strong>DNS</strong></p>
<p><strong>æœ¬æ–‡å‚è€ƒèµ„æ–™æ¥æºï¼š</strong></p>
<ol>
<li>Lean Â· coolsnowwolf/lede - GitHub : <a href="https://github.com/coolsnowwolf/lede" target="_blank">https://github.com/coolsnowwolf/lede</a></li>
<li>OpenWrt å®˜æ–¹å¸®åŠ©æ–‡æ¡£ :  <a href="https://openwrt.org/zh/docs/guide-user/virtualization/docker_openwrt_image" target="_blank">https://openwrt.org/zh/docs/guide-user/virtualization/docker_openwrt_image</a></li>
<li>ç¾ä¸½åº”ç”¨ :  <a href="https://mlapp.cn/376.html" target="_blank">https://mlapp.cn/376.html</a></li>
</ol>
<p></p>
                        <div>
                            <hr>
ä½œè€…ï¼š<a href="https://jokefrelon.github.io" target="_blank">JokerLee</a><br>
è½¬è½½è¯·æ³¨æ˜æ¥æºï¼š<a href="https://jokefrelon.github.io/articles/2020/03/20/1584702695341.html" target="_blank">Docker ä¸­è¿è¡Œ OpenWrt</a><br>
<br>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module mobile__hidden">
                <div class="module__content fn__clear">
                        <a href="https://jokefrelon.github.io/articles/2020/03/16/1584344826236.html" rel="prev" class="fn__left breadcrumb">
                            æ—§ä¸€ç¯‡: Bay Trailä¸»æ¿å®‰è£…Linuxçš„å‘
                        </a>
                        <a href="https://jokefrelon.github.io/articles/2020/03/31/1585624128468.html" rel="next"
                           class="fn__right breadcrumb">
                            ä¸€è¾ˆå­éƒ½ä¸æƒ³å®‰è£…ç³»ç»Ÿäº†!: æ–°ä¸€ç¯‡
                        </a>
                </div>
            </div>

            <div class="module mobile__hidden fn__none">
                <div class="module__content">
                    <a href="https://jokefrelon.github.io/articles/2020/03/16/1584344826236.html" rel="prev" class="breadcrumb">
                        æ—§ä¸€ç¯‡: Bay Trailä¸»æ¿å®‰è£…Linuxçš„å‘
                    </a>
                </div>
            </div>

            <div class="module mobile__hidden fn__none">
                <div class="module__content">
                    <a href="https://jokefrelon.github.io/articles/2020/03/31/1585624128468.html" rel="next"
                       class="breadcrumb">
                        æ–°ä¸€ç¯‡: ä¸€è¾ˆå­éƒ½ä¸æƒ³å®‰è£…ç³»ç»Ÿäº†!
                    </a>
                </div>
            </div>

<div class="comments__item">
    <div class="comments__meta comments__meta--only">è¯„è®º</div>
</div>

<ul class="comments" id="comments">
</ul>

<div class="comments__item">
    <div class="comments__meta">
        å‘è¡¨è¯„è®º
    </div>
    <div class="comments__content">
        <div class="form">
            <textarea rows="3" placeholder="å‘è¡¨è¯„è®º" id="comment"></textarea>
        </div>
    </div>
</div>

            <div class="fn__flex article__relevant">
                <div class="fn__flex-1" id="externalRelevantArticlesWrap">
                    <div class="module">
                        <div id="externalRelevantArticles" class="module__list"></div>
                    </div>
                </div>
                <div class="mobile__hidden">&nbsp; &nbsp; &nbsp; &nbsp; </div>
                <div class="fn__flex-1" id="randomArticlesWrap">
                    <div class="module">
                        <div id="randomArticles" class="module__list"></div>
                    </div>
                </div>
                <div class="mobile__hidden">&nbsp; &nbsp; &nbsp; &nbsp; </div>
                <div class="fn__flex-1" id="relevantArticlesWrap">
                    <div class="module">
                        <div id="relevantArticles" class="module__list"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
<aside class="side">
        <div class="module">
            <div class="module__list">
<ul class="article__toc">
        <li class="toc__h1">
            <a href="#b3_solo_h1_0">Docker ä¸­è¿è¡Œ OpenWrt</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_1">1 å¯¼å…¥ OpenWrt çš„é•œåƒ</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_2">2 Docker åˆ›å»ºç½‘ç»œ</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_3">3 Docker è¿è¡Œå®¹å™¨</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_4">4 è¿›å…¥ OpenWrt å®¹å™¨å†…ï¼Œè¿›ä¸€æ­¥é…ç½®</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_5">4.1 é…ç½®ç½‘ç»œ</a>
        </li>
        <li class="toc__h4">
            <a href="#b3_solo_h4_6">4.1.1 æŸ¥çœ‹ä¸€ä¸‹ IP</a>
        </li>
        <li class="toc__h4">
            <a href="#b3_solo_h4_7">4.1.2 ç®€æ˜“ä¿®æ”¹é˜²ç«å¢™è§„åˆ™</a>
        </li>
        <li class="toc__h4">
            <a href="#b3_solo_h4_8">4.1.3 ä¿®æ”¹ç½‘å£</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_9">4.2 ç½‘é¡µç™»å½•</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_10">4.3 å†æ·»åŠ ä¸€ä¸ªç½‘å£åˆ° OpenWrt å®¹å™¨</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_11">ps:è¡¥å……ä¸€ä¸‹</a>
        </li>
</ul>            </div>
        </div>
        <section class="vditor-reset module">
            <main class="module__content">
                Life is but a spanğŸ¥°FreLon_LeeğŸ¥°


<!-- å…¬å‘Šæ å¯ä½¿ç”¨ HTMLã€JavaScriptï¼Œæ¯”å¦‚å¯ä»¥åœ¨æ­¤åŠ å…¥ç¬¬ä¸‰æ–¹ç»Ÿè®¡ js -->

            </main>
        </section>


    <div class="module item">
        <header class="module__header ft__center">
            JokerLee
        </header>
        <main class="module__content ft__center">
            <img class="side__avatar" src="https://img.hacpai.com/avatar/1575322384198_1579086976432.gif?imageView2/1/w/128/h/128/interlace/0/q/100" alt="JokerLee"/>
            è®°å½•ç²¾å½©çš„Debugäººç”Ÿ <br> <br>
    <a href="https://hacpai.com/member/JokerLee"
       title="https://hacpai.com/member/JokerLee"
       class="user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/jokefrelon"
           title="https://github.com/jokefrelon"
           class="user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

        <a href="https://telegram.me/jokemelee"
           title="https://telegram.me/jokemelee"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M12.036 27.787c-0.952 0-0.791-0.361-1.119-1.266l-2.805-9.23 21.577-12.802z"></path><path d="M12.036 27.787c0.736 0 1.060-0.336 1.474-0.738l3.923-3.811-4.896-2.953z"></path><path d="M12.536 20.285l11.857 8.76c1.354 0.747 2.331 0.361 2.668-1.256l4.828-22.745c0.496-1.983-0.752-2.88-2.046-2.294l-28.348 10.933c-1.934 0.776-1.925 1.857-0.352 2.338l7.276 2.267 16.838-10.621c0.794-0.48 1.525-0.223 0.926 0.309z"></path>
            </svg>
        </a>
        <a href="tencent://message/?uin=2643551148"
           title="2643551148"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.821 14.393c-0.125-0.304-0.143-0.607-0.143-0.929 0-0.5 0.321-1.304 0.625-1.679-0.018-0.464 0.179-1.411 0.536-1.714 0-3.304 2.554-7.464 5.536-8.893 1.839-0.875 3.768-1.179 5.786-1.179 1.571 0 3.286 0.375 4.75 0.982 4.196 1.768 5.143 5.054 6.036 9.25l0.018 0.089c0.518 0.786 0.982 1.714 0.982 2.679 0 0.482-0.321 0.964-0.321 1.393 0 0.036 0.107 0.179 0.125 0.214 1.536 2.268 2.929 4.732 2.929 7.554 0 0.625-0.339 2.804-1.339 2.804-0.696 0-1.464-1.696-1.714-2.161-0.018-0.018-0.036-0.018-0.054-0.018l-0.089 0.071c-0.571 1.482-1.196 2.875-2.357 3.982 1.018 0.982 2.661 0.893 2.964 2.589-0.089 0.196-0.054 0.411-0.196 0.607-1.018 1.536-3.75 1.732-5.393 1.732-2.179 0-3.946-0.571-6-1.179-0.429-0.125-1.071-0.054-1.536-0.107-1.089 1.196-3.75 1.518-5.286 1.518-1.357 0-6.607-0.089-6.607-2.411 0-1 0.214-1.286 0.911-1.929 0.554-0.107 0.964-0.411 1.607-0.446 0.089 0 0.161-0.018 0.25-0.036 0.018-0.018 0.036-0.018 0.036-0.071l-0.036-0.054c-1.232-0.286-2.964-3.393-3.232-4.679l-0.089-0.054c-0.125 0-0.179 0.268-0.214 0.357-0.393 0.911-1.321 1.893-2.357 2h-0.018c-0.143 0-0.089-0.143-0.196-0.179-0.25-0.589-0.411-1.125-0.411-1.786 0-3.571 1.714-6.214 4.5-8.321z"></path>
            </svg>
        </a>
        </main>
    </div>

        <div class="module item">
            <header class="module__header">
                åˆ†ç±»
            </header>
            <main class="module__content fn__clear module__content--three">
                    <a href="https://jokefrelon.github.io/category/Java"
                       aria-label="1 ä¸ªæ ‡ç­¾"
                       class="tag vditor-tooltipped vditor-tooltipped__n">
                        java</a>
                    <a href="https://jokefrelon.github.io/category/python"
                       aria-label="1 ä¸ªæ ‡ç­¾"
                       class="tag vditor-tooltipped vditor-tooltipped__n">
                        Python</a>
                    <a href="https://jokefrelon.github.io/category/Linux"
                       aria-label="1 ä¸ªæ ‡ç­¾"
                       class="tag vditor-tooltipped vditor-tooltipped__n">
                        Linux</a>
                    <a href="https://jokefrelon.github.io/category/links"
                       aria-label="1 ä¸ªæ ‡ç­¾"
                       class="tag vditor-tooltipped vditor-tooltipped__n">
                        Links</a>
            </main>
        </div>

        <div class="module item">
            <header class="module__header">æ ‡ç­¾</header>
            <main class="module__content--three module__content fn__clear">
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/Linux"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="12 ç¯‡æ–‡ç« ">
                        Linux</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/Java"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="10 ç¯‡æ–‡ç« ">
                        Java</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/python"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="4 ç¯‡æ–‡ç« ">
                        python</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/Docker"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="2 ç¯‡æ–‡ç« ">
                        Docker</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/GitHub"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        GitHub</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/WSL2"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        WSL2</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/intel"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        intel</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/ffmpeg"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        ffmpeg</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/links"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        links</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/WeChat"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        WeChat</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/OpenWrt"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        OpenWrt</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/SpringBoot"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        SpringBoot</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/%E5%BC%80%E6%BA%90"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        å¼€æº</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/Solo"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        Solo</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/nginx"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        nginx</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/%E6%97%A5%E8%AE%B0"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        æ—¥è®°</a>
                    <a rel="tag"
                       href="https://jokefrelon.github.io/tags/Frp"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 ç¯‡æ–‡ç« ">
                        Frp</a>
            </main>
        </div>

        <div class="module item">
            <header class="module__header">è¯„è®ºæœ€å¤šçš„æ–‡ç« </header>
            <main class="module__list">
                <ul>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2020/01/10/1578626602884.html">
                                å¾®ä¿¡å°ç¨‹åºé‡åˆ°çš„å‘
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2020/06/14/1592141097046.html">
                                åˆ©ç”¨Pythonçˆ¬è™«è·å–bing.comæ¯å¤©çš„é«˜æ¸…å£çº¸
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2020/07/03/1593769988253.html">
                                æ”¶é›†æ•´ç†ä¸€äº›æˆ‘ä¸ç»å¸¸ä½¿ç”¨,ä½†æ˜¯ä½¿ç”¨æ—¶åˆæ‰¾ä¸åˆ°çš„ç½‘ç«™é“¾æ¥
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2020/07/03/1593768976855.html">
                                Python æŠ¥é”™é›†é”¦
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2020/07/01/1593533676745.html">
                                Python çˆ¬è™«æŠ“å–ğŸ˜³æ’­æ”¾æº(m3u8)
                            </a>
                        </li>
                </ul>
            </main>
        </div>

        <div class="module item">
            <header class="module__header">è®¿é—®æœ€å¤šçš„æ–‡ç« </header>
            <main class="module__list">
                <ul>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2019/12/28/1577495753800.html">
                                Java IO æ–‡ä»¶çš„è¯»å†™ä¸é«˜æ•ˆç‡IO
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/my-github-repos">
                                æˆ‘åœ¨ GitHub ä¸Šçš„å¼€æºé¡¹ç›®
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2019/12/05/1575541246758.html">
                                Soloæœ€ç®€å®‰è£…
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2019/12/20/1576774367244.html">
                                Java equalsæ–¹æ³•å’Œcontainsä¸ºä»€ä¹ˆè¦é‡å†™?
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow"
                               href="https://jokefrelon.github.io/articles/2019/12/22/1576958773512.html">
                                Java æ—¶é—´ç±»APIçš„ä½¿ç”¨
                            </a>
                        </li>
                </ul>
            </main>
        </div>

    <div class="module item">
        <div class="module__header">
            <div class="fn__flex">
                <a href="https://jokefrelon.github.io/archives.html" class="fn__flex-1 ft__center">
                    29
                    æ–‡ç« 
                </a>
                    <a href="https://jokefrelon.github.io/dynamic.html" class="fn__flex-1 ft__center">
                        4
                        è¯„è®º
                    </a>
            </div>
            <br/>
            <div class="fn__flex">
                <div class="fn__flex-1 ft__center">
                    <span data-uvstaturl="https://jokefrelon.github.io">1685</span> <span class="ft-gray">æµè§ˆ</span>
                </div>
                <div class="fn__flex-1 ft__center">
                    34 <span class="ft-gray">è®¿å®¢</span>
                </div>
            </div>
        </div>
    </div>
</aside>
    
    </div>
</div>
<div class="icon__up" onclick="Util.goTop()"></div>
<footer class="footer">
    &copy; 2020
    <a href="https://jokefrelon.github.io">Frelon-Lee (â—'â—¡'â—) Blog</a>
    <a href="http://www.beian.miit.gov.cn">çš–ICPå¤‡19024475å·-1</a>  <span class="fn__none--m">&nbsp; â€¢ &nbsp;</span>
    <div class="fn__none"></div>
    <br/>

    Powered by <a href="https://solo.b3log.org" target="_blank">Solo</a>
    <div class="fn__none"></div>
    &nbsp; &heartsuit;  &nbsp;
    Theme nijigen
    <sup>[<a href="https://github.com/ZEROKISEKI/hexo-theme-gal" target="_blank">ref</a>]</sup>
    by <a href="http://vanessa.b3log.org" target="_blank">Vanessa</a>
</footer>
<div class="icon-up" onclick="Util.goTop()"></div>

<script type="text/javascript" src="https://jokefrelon.github.io/js/lib/compress/pjax.min.js" charset="utf-8"></script>
<script type="text/javascript" src="https://jokefrelon.github.io/js/common.min.js?1593550019882" charset="utf-8"></script>
<script type="text/javascript" src="https://jokefrelon.github.io/skins/nijigen/js/common.min.js?1593550019882" charset="utf-8"></script>
<script src="https://cdn.jsdelivr.net/npm/uvstat@v1.0.4/dist/index.min.js"></script>
<script>
    var Label = {
        servePath: "https://jokefrelon.github.io",
        staticServePath: "https://jokefrelon.github.io",
        luteAvailable: false,
        hljsStyle: 'github',
        langLabel: "zh_CN",
        version: "3.7.0",
    }
    Util.init()
</script>


<script type="text/javascript">
    Util.addScript('https://jokefrelon.github.io/js/page.min.js?1593550019882', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "è¯„è®ºå†…å®¹åªèƒ½ä¸º 2 åˆ° 500 ä¸ªå­—ç¬¦ï¼",
        "oId": "1584702695341",
        "blogHost": "https://jokefrelon.github.io",
        "randomArticles1Label": "éšæœºé˜…è¯»ï¼š",
        "externalRelevantArticles1Label": "ç«™å¤–ç›¸å…³é˜…è¯»ï¼š"
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
    Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 49ms, 2020/07/04 01:27:59 -->